{% extends 'dashboard/base.html' %}
{% load static %}


{% block content %}

<div class="card-body">

    <table class="table">
    <thead class="thead-dark">
    <tr>
        <th scope="col">ID</th>
        <th scope="col">Name</th>
        <th scope="col">Slug</th>
        <th scope="col">Active</th>
        <th scope="col">Actions</th>
    </tr>
    </thead>
    <tbody>

    {% for i in ctgs %}
    <tr>
        <th scope="row">{{ i.id }}</th>
        <td>{{ i.name }}</td>
        <td>{{ i.slug }}</td>
        <td>
            {% if i.is_menu %}
            <a
                    type="button" class="text text-success rounded-pill mt-2">
                <i
                        class="fas fa-check">

                </i>
            </a>
            {% else %}
            <a
                    type="button" class="text text-danger rounded-pill mt-2">
                <i
                        class="fas fa-close">

                </i>
            </a>
            {% endif %}
        </td>

        <td>

                 <button data-toggle='modal' data-target="#EditCategoryModal_{{ i.id }}" type="submit" href="{% url 'dashboard:ctg-edit' i.id %}" class="btn btn-outline-primary rounded-pill">
                     <i class="fas fa-pencil">

                     </i>
                 </button>
                 <button data-toggle='modal' data-target="#DeleteModal_{{ i.id }}" type="submit"  href="{% url 'dashboard:ctg-delete' i.id %}" class="btn btn-outline-danger rounded-pill ml-2" >
                     <i class="fas fa-trash ">

                     </i>
                 </button>
        </td>

    </tr>
    {% endfor %}

    </tbody>
</table>



        <button class="btn btn-success btn-outline" data-toggle="modal" data-target="#AddCategoryModal"> add</button>
        {% if count > 4 %}
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                {% if ctgs.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ ctgs.previous_page_number }}" tabindex="-1" aria-disabled="true">Previous</a>
                </li>
                {% endif %}
                {% for i in paginator.page_range %}
                   {% if i == page %}
                       <li class="page-item active "><a class="page-link" href="#">{{ i }}</a></li>
                   {% else %}
                       <li class="page-item"><a class="page-link" href="#">{{ i }}</a></li>
                   {% endif %}
                {% endfor %}
                {% if ctgs.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ ctgs.next_page_number }}">Next</a>
                </li>
                {% endif %}
            </ul>
        </nav>
        {% endif %}


</div>

<!-- ###################################################### delete ########################################################################-->

{% for i in ctgs %}
<div class="modal fade bd-example-modal-sm" id="DeleteModal_{{ i.id }}" tabindex="-1" role="dialog"  aria-hidden="true">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">delete confirmation: {{ i.name }}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>rostan ham <mark class="bg-danger">{{ i.name }}</mark> ni ochirmoqchimisiz </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">yo'q</button>
                <a href="{% url 'dashboard:ctg-delete' i.id %}" type="button" class="btn btn-primary">ha</a>
            </div>
        </div>
    </div>
</div>
{% endfor %}

<!--###################################################### edit #######################################################################-->

{% for i in ctgs %}
<div class="modal fade" id="EditCategoryModal_{{ i.id }}" tabindex="-1" role="dialog" aria-labelledby="EditCategoryModalTitle_{{ i.id }}" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <form class="modal-content" method="post" action="{% url 'dashboard:ctg-edit' i.id %}">
            {% csrf_token %}
            <div class="modal-header">
                <h5 class="modal-title" id="EditCategoryModalTitle_{{ i.id }}">new edit category {{ i.name }}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">


                <div class="form-group">
                    <label for="">Name:</label>
                    <input type="text" class="form-control" name="name" value="{{ i.name }}">
                </div>

                <div class="form-group">
                    <label for="pwd">Slug:</label>
                    <input type="text" class="form-control" name="slug" value="{{ i.slug }}">
                </div>

                <div class="checkbox mb-3">
                    <label><input type="checkbox" name="is_menu" id="ctg-edit_{{ i.is_menu }}">is_menu</label>
                </div>





            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
            </div>
        </form>


    </div>
</div>
{% endfor %}






<!-- ############################################ |add|  ############################################################################################################-->



<div class="modal fade" id="AddCategoryModal" tabindex="-1" role="dialog" aria-labelledby="AddCategoryModalTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <form class="modal-content" method="post" action="{% url 'dashboard:add_ctg' %}">
            {% csrf_token %}
            <div class="modal-header">
                <h5 class="modal-title" id="AddCategoryModalTitle">new category</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">


                    <div class="form-group">
                        <label for="email">Name:</label>
                        <input type="text" class="form-control" name="name">
                    </div>

                    <div class="form-group">
                        <label for="pwd">Slug:</label>
                        <input type="text" class="form-control" name="slug">
                    </div>

                    <div class="checkbox mb-3">
                        <label><input type="checkbox" name="is_menu">is_menu</label>
                    </div>





            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
            </div>
        </form>


    </div>
</div>



{% endblock %}